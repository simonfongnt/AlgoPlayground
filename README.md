# Welcome to AlgoPlayground
This is a project template for machine learning. Machine learning requires dataset, model and test. During the development, any issues/changes to code would consume a great amount of time. This template allows code changes while the other result/params persist. 


If the dataset is ready, some changes is needed in model. The model can be reloaded after changes, and since dataset persists, it can be used immediately and save the time reconstructing the dataset.


## Architecture
The file and folder names in the following architecture are used as example for demostration.
```
root
|--config                       : configuration folder
|   |--path.json                : path specification
|   |--login.json               : login details (e.g. telegram, ...)
|--data                         : data folder
|   |--raw                      : raw data folder
|   |   |--RAWSAMPLE
|   |   |   |--ABC.csv
|   |   |--...
|   |--DATA_SAMPLE              : dataset folder
|   |   |--x_train.feather
|   |   |--y_train.csv
|   |   |--...
|--dist                         : exported algomodel
|   |--KERAS_NN_SAMPLE          : algomodel folder 
|   |   |--KERAS_NN_SAMPLE-Test-1618449908-AlgoModel
|   |   |--...
|   |--SKLEARN_SVC_SAMPLE
|   |   |--SKLEARN_SVC_SAMPLE-Test-1618449908-AlgoModel
|   |   |--...
|--lib                          : modules
|   |--data                     : data modules
|   |   |--DATA_SAMPLE.py       
|   |--model                    : model modules
|   |   |--KERAS_NN_SAMPLE.py
|   |   |--SKLEARN_SVC_SAMPLE.py
|   |--test                     : test modules
|   |   |--KERAS_NN_SAMPLE.py
|   |   |--SKLEARN_SVC_SAMPLE.py
|   |--...
|--log                          : logs
|--model                        : trained / untrained model folder
|   |--tmp                      : untrained models
|   |   |--KERAS_NN_SAMPLE
|   |   |--SKLEARN_SVC_SAMPLE
|   |--KERAS_NN_SAMPLE
|   |--SKLEARN_SVC_SAMPLE
|--misc                         : miscellaneous (image, result)
|--script                       : script (shortcut of commands)
|   |--KERAS_NN_SAMPLE.txt
|   |--SKLEARN_SVC_SAMPLE.txt
|--main.py
```
## Required files for a project
Development requires the following file located in specific location.
1. Raw data at `data/raw/`
    - e.g. `data/raw/RAWSAMPLE/ABC.csv`
2. data preprocessing code at `lib/data/`
    - e.g. `lib/data/DATA_SAMPLE.py `
3. model training code at `lib/model/`
    - e.g. `lib/model/KERAS_NN_SAMPLE.py`
4. model test code at `lib/test/`
    - e.g. `lib/test/KERAS_NN_SAMPLE.py `

## Usage
dataset, model and algomodel can be generated by commands / scripts. This template runs with commpand prompt which accepts commands or scripts.

```
data option ...    dataset preprocessing, data -h for more info
model option ...   model creation, model -h for more info
test option ...    model test, test -h for more info
kill option ...    kill running thread, kill -h for more info
script option ...  automation, script -h for more info
```

Example Scripts with description: (script/KERAS_NN_SAMPLE.txt)

```
data module DATA_SAMPLE         # load DATA_SAMPLE.py in lib/data/
model module KERAS_NN_SAMPLE    # load KERAS_NN_SAMPLE.py in lib/model/
test module KERAS_NN_SAMPLE     # load KERAS_NN_SAMPLE.py in lib/test/
data raw RAWSAMPLE              # load RAWSAMPLE folder in data/raw/
data create                     # create dataset from raw
data save 0.25 0.25             # save datasets to data/DATA_SAMPLE/
data to model                   # share dataset to model module
data to test                    # share dataset to test module
model create                    # create model
model compile                   # compile model
model fit                       # train model & save to model/tmp
model to test                   # share model to test module
test run                        # run model test
test save                       # save model to model/
test analysis                   # test algomodel
test export                     # export algomodel to dist/
```

## Algomodel
Algomodel is the final product saved by pickle in `dist/`.
    - e.g. `dist/KERAS_NN_SAMPLE/KERAS_NN_SAMPLE-Test-1618449908-AlgoModel`

### Usage
The algomodel can be simply loaded and use as follows.
```
# load the AlgoModel
path = `dist/KERAS_NN_SAMPLE/KERAS_NN_SAMPLE-Test-1618449908-AlgoModel`
with open(path, 'rb') as mFile:
    model = pickle.load(
        mFile
    )

# display its info
print(model.Info()) 
# KERAS_NN_SAMPLE: e.g. AlgoModel.Predict([123, 234, 345, 456])

# predict with params
result = model.Predict([123, 234, 345, 456])    
# False
```
